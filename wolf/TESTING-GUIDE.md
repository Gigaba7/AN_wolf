# 検証・テストガイド

## 検証方法の選択

Firebase同期機能の検証は、**ローカルサーバー**でも**GitHub Pages**でも可能です。

## 方法1: ローカルサーバーで検証（推奨：最初の検証）

### メリット
- ✅ すぐに始められる（GitHubへのプッシュ不要）
- ✅ エラー修正が速い（ファイルを編集してリロードするだけ）
- ✅ デバッグが簡単（開発者ツールで確認しやすい）
- ✅ インターネット接続があれば動作する

### デメリット
- ❌ 他の人と共有できない（一人でテスト）
- ❌ 本番環境とは異なる（HTTPSではない）

### 手順

1. **ローカルサーバーを起動**
   ```bash
   # Python 3の場合
   python -m http.server 8000
   
   # Node.jsの場合（http-serverをインストール）
   npx http-server -p 8000
   
   # PHPの場合
   php -S localhost:8000
   ```

2. **ブラウザでアクセス**
   - `http://localhost:8000` を開く

3. **開発者ツールを開く**
   - F12キーを押す
   - コンソールタブを確認

4. **動作確認**
   - 「ルーム作成（GM）」をクリック
   - プレイヤーを設定して「ゲーム開始」
   - コンソールにログが表示されることを確認
   - ルームIDが表示されることを確認

### ローカル検証で確認できること
- ✅ Firebase認証が動作するか
- ✅ Firestoreへの書き込みが成功するか
- ✅ ルームIDが正しく生成・表示されるか
- ✅ エラーメッセージの確認
- ✅ 基本的な同期機能

## 方法2: GitHub Pagesで検証（推奨：共有・最終確認）

### メリット
- ✅ 複数人で同時にテストできる
- ✅ 本番環境と同じ条件（HTTPS）
- ✅ スマートフォンからもアクセス可能
- ✅ 実際の使用環境に近い

### デメリット
- ❌ プッシュ→デプロイ→確認のサイクルが必要（時間がかかる）
- ❌ エラー修正のサイクルが長い

### 手順

1. **GitHubリポジトリを作成**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/[username]/[repository-name].git
   git push -u origin main
   ```

2. **GitHub Pagesを有効化**
   - リポジトリの「Settings」→「Pages」
   - 「Source」で「main」ブランチを選択
   - 「Save」をクリック

3. **デプロイを待つ**
   - 数分待つ（通常1-2分）
   - `https://[username].github.io/[repository-name]` でアクセス可能

4. **動作確認**
   - 複数のブラウザ/デバイスでアクセス
   - ルーム作成・参加をテスト
   - リアルタイム同期を確認

### GitHub Pages検証で確認できること
- ✅ 複数人での同時接続
- ✅ リアルタイム同期の動作
- ✅ 異なるデバイス間での動作
- ✅ 本番環境でのパフォーマンス

## 推奨される検証フロー

### ステップ1: ローカルで基本動作を確認
1. ローカルサーバーを起動
2. Firebase Consoleの設定を確認
3. 基本的な動作（ルーム作成、ID表示）を確認
4. エラーがあれば修正

### ステップ2: ローカルで同期機能を確認
1. 2つのブラウザウィンドウを開く（または2つのデバイス）
2. 片方でルーム作成、もう片方で参加
3. リアルタイム同期を確認

### ステップ3: GitHub Pagesで最終確認
1. エラーがなければGitHubにプッシュ
2. GitHub Pagesでデプロイ
3. 複数人で最終テスト

## 注意事項

### ローカルサーバーでの注意点
- `file://`プロトコル（直接ファイルを開く）では動作しません
- 必ずローカルサーバーを使用してください
- CORSエラーが出る場合は、Firebase Consoleでホスト名を許可リストに追加

### GitHub Pagesでの注意点
- デプロイには数分かかります
- キャッシュの影響で変更が反映されない場合があります（Ctrl+F5で強制リロード）
- HTTPSで動作するため、Firebaseの設定でHTTPSを許可する必要があります

## トラブルシューティング

### ローカルでエラーが出る場合
1. ローカルサーバーが正しく起動しているか確認
2. `http://localhost:8000` でアクセスしているか確認（`file://`ではない）
3. ブラウザのコンソールでエラーメッセージを確認

### GitHub Pagesでエラーが出る場合
1. デプロイが完了しているか確認（数分待つ）
2. ブラウザのキャッシュをクリア（Ctrl+F5）
3. Firebase Consoleでホスト名が許可されているか確認

## 結論

**最初の検証はローカルサーバーで行い、問題がなければGitHub Pagesで最終確認する**のが効率的です。

- ローカル: 開発・デバッグ・基本動作確認
- GitHub Pages: 共有・最終確認・本番環境テスト
